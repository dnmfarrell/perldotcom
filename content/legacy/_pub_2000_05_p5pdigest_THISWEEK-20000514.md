{
   "slug" : "/pub/2000/05/p5pdigest/THISWEEK-20000514.html",
   "description" : " Notes Regex Stress Testing Another Thread-Safing Patch Enormous perldoc discussion winds up Build patches for OS/2 Regex Engine Method calls on unblessed references Version Tuples Broken? Negative Subscripts for Tied Arrays Upcoming corrections Various Notes You can subscribe to...",
   "authors" : [
      "mark-jason-dominus"
   ],
   "draft" : null,
   "date" : "2000-05-14T00:00:00-08:00",
   "categories" : "community",
   "title" : "This Week on p5p 2000/05/14",
   "image" : null,
   "tags" : [],
   "thumbnail" : null
}



-   [Notes](#Notes)
-   [Regex Stress Testing](#Regex_Stress_Testing)
-   [Another Thread-Safing Patch](#Another_Thread_Safing_Patch)
-   [Enormous `perldoc` discussion winds up](#Enormous_perldoc_discussion_winds_up)
-   [Build patches for OS/2](#Build_patches_for_OS2)
-   [Regex Engine](#Regex_Engine)
-   [Method calls on unblessed references](#Method_calls_on_unblessed_references)
-   [Version Tuples Broken?](#Version_Tuples_Broken?)
-   [Negative Subscripts for Tied Arrays](#Negative_Subscripts_for_Tied_Arrays)
-   [Upcoming corrections](#Upcoming_corrections)
-   [Various](#Various)

### <span id="Notes">Notes</span>

You can subscribe to an email version of this summary by sending an empty message to [`p5p-digest-subscribe@plover.com`.](mailto:p5p-digest-subscribe@plover.com)

Please send corrections and additions to `mjd-perl-thisweek-YYYYMM@plover.com` where `YYYYMM` is the current year and month.

It was tempting to just post \`nothing happened this week'. Lots of small patches to fix various 5.6.0 misbehaviors, and reports of new 5.6.0 misbehaviors. An unusual number of people who should have known better posting requests for dumb trivial features. Low traffic. Few big discussions.

### <span id="Regex_Stress_Testing">Regex Stress Testing</span>

Jarkko Hietaniemi wrote a module called `Regex::PreSuf` which accepts a list of words and builds a regex that recognizes only those words. Mike Giroux suggested that the large regexes generated by this module could be used to stress-test the regex engine. (Avi Finkel's `String::REPartition` module might be used similarly.)

Ilya said it would be better to add the trie code from `Regex::PreSuf` to the regex engine. Jarkko replied that he would prefer to eat live rattlesnakes.

### <span id="Another_Thread_Safing_Patch">Another Thread-Safing Patch</span>

Dan Sugalski sent a replacement for his patch that makes the `lock()` function thread-safe. It also exposes `lock()` functionality to XS subroutines, and some other things.

[See the patch.](https://www.nntp.perl.org/group/perl.perl5.porters/2000/05/msg00352.html)

Also in thread news: A user posted a message asking why threads weren't fully supported, and Dan replied at some length. (Summary: Because it's hard.)

[Dan's reply.](https://www.nntp.perl.org/group/perl.perl5.porters/2000/05/msg00382.html)

> **Marek Rouchal:** Bottom line: I'd be very happyabout fully working threads in Perl 5.6.1
>
> **Dan Sugalski:**You and me both. :) I wouldn't hold my breath.
>
### <span id="Enormous_perldoc_discussion_winds_up">Enormous `perldoc` discussion winds up</span>

As quickly as it arrived, last week's discussion of docmuentation issues has ended. The only discussion of note this week was a message from Mark Fisher with a reference to a 1971 paper that compared automatic indexing with manual indexing. Would-be indexers should probably take a look at this.

[Mark's message.](https://www.nntp.perl.org/group/perl.perl5.porters/2000/05/msg00387.html)

[Gerald Salton's paper.](http://cs-tr.cs.cornell.edu/Dienst/UI/2.0/Describe/ncstrl.cornell/TR71-115)

### <span id="Build_patches_for_OS2">Build patches for OS/2</span>

Rocco Caputo made some changes to fix the build process on OS/2.

[Read about it.](https://www.nntp.perl.org/group/perl.perl5.porters/2000/05/msg00357.html)

### <span id="Regex_Engine">Regex Engine</span>

In the course of trying to investigate a bug in the regex engine, Hugo van der Sanden critiqued the code style and comments. This led to a brief but interesting discussion about the code there.

[Original bug report](https://www.nntp.perl.org/group/perl.perl5.porters/2000/05/msg00271.html)

[Hugo's critique message](https://www.nntp.perl.org/group/perl.perl5.porters/2000/05/msg00362.html)

### <span id="Method_calls_on_unblessed_references">Method calls on unblessed references</span>

John Tobey submitted a patch to enable

            $r->method(arg, ...)

when `$r` is unblessed. If I understand correctly, the method is looked up in a package named `HASH` or `ARRAY` or whatever.

Randal said that this had come up some years ago, and the consensus was not to do it, since it would make erroneous method calls harder to catch.

I was not able to find this discussion. John found a 1996 message from Tim Bunce that referred to an even earlier discussion of this same idea. (Tim submitted a patch similar to John's.) If anyone can dig up a pointer to the original discussion, please let me know.

[Tim's really old message.](https://www.nntp.perl.org/group/perl.perl5.porters/96/07/msg00750.html)

### <span id="Version_Tuples_Broken?">Version Tuples Broken?</span>

Ian Phillipps pointed out two problems with version tuples. But Ilya said that no, the problem was not with the tuples, but with the results produced by the `unpack` and `print` functions when extracting the result. Mike Guy then pointed out that

            (256.255.254 . 257.258.259) eq (256.255.254.257.258.259)

is *false*.

Sarathy said that this is because `eq` is broken; it'll be fixed in 5.6.1.

### <span id="Negative_Subscripts_for_Tied_Arrays">Negative Subscripts for Tied Arrays</span>

Michael Schwern complained that if you have a tied array, and you do

            $array[-1]

Perl does not call `$o->FETCH(-1)`, but rather instead it calls `$o->FETCHSIZE()` to find out how long the array is, say 80 elements, and then invokes `$o->FETCH(79)` to get the last element. Nick Ing-Simmons, the author of the tied array implementation, said that that was how it was supposed to work, and changing it will break existing code.

### <span id="Upcoming_corrections">Upcoming corrections</span>

Brad Appleton, the author of the `Pod::Parser` module suite, felt that some of my comments from the previous report were unfair. In particular, he says that the current `Pod::Parser` implementation is incomplete, was designed for flexibility rather than speed, and he is sure that large speed gains could be easily had. Brad is preparing a long and informative reply, which I expect to include in next week's report.

### <span id="Various">Various</span>

A large collection of bug reports, bug fixes, non-bug reports, questions, answers, and a small amaount of flamage and spam.

Until next week I remain, your humble and obedient servant,

------------------------------------------------------------------------

[Mark-Jason Dominus](mailto:mjd-perl-thisweek-200005+@plover.com)
